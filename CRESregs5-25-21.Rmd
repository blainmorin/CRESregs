---
title: "Regression"
author: "Blain Morin"
date: "5/25/2021"
output: html_document
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(RSQLite)
library(lubridate)

```


```{r}

conn = dbConnect(RSQLite::SQLite(), "puco.db")

test = dbGetQuery(conn, "SELECT * FROM Responses WHERE ContractTerms in (12, 24) AND refRateType = 'Fixed' and MeasurementText = 'kWh' AND refRateCode = 'Residential' ")

AEP = test %>%
  filter(TerritoryName == "American Electric Power")

remove(test)

```

```{r}

AEP1 = AEP %>%
  mutate(Offer_Date = substring(AEP$PublishDate, 1, 10)) %>%
  mutate(ContractTerms = as.factor(ContractTerms)) %>%
  mutate(Offer_Date = ymd(Offer_Date)) %>%
  mutate(Utility_Price = 0) %>%
  mutate(Utility_Price = ifelse(Offer_Date >= ymd("2014-06-01"), 49.3385
, 0)) %>%
  mutate(Utility_Price = ifelse(Offer_Date >= ymd("2015-06-01"), 54.8702

, 0)) %>%
  mutate(Utility_Price = ifelse(Offer_Date >= ymd("2016-06-01"), 52.9831

, 0)) %>%
  mutate(Utility_Price = ifelse(Offer_Date >= ymd("2017-06-01"), 51.1387

, 0)) %>%
  mutate(Utility_Price = ifelse(Offer_Date >= ymd("2018-06-01"), 49.3497

, 0)) %>%
  mutate(Utility_Price = ifelse(Offer_Date >= ymd("2019-06-01"), 47.376

, 0)) %>%
  mutate(Utility_Price = ifelse(Offer_Date >= ymd("2020-06-01"), 42.1655

, 0)) 


test2 = lm()

```